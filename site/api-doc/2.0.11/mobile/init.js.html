---
layout: default
id: api-doc
version: 2x_mobile
title: "Chico UI - v2x mobile - API - Source: mobile/scripts/init.js"
---

<main role="main" class="chico-api-doc">
    <section class="chico-bg-noise chico-head">
        <div class="ml-bounds mesh-row">
            <h1 class="mesh-col-12">
                API
            </h1>
            <h3 class="mesh-col-12">
                Full API documentation.
            </h3>
        </div>
    </section>
    <section>
        <div class="ml-bounds mesh-row">
            <div class="mesh-col-12 mesh-col-m-9 chico-content">
                <h1>
                    Source: mobile/scripts/init.js
                </h1>
                


    
    <section>
        <article>
            <pre class="prettyprint source"><code>    // Remove no-js classname
    tiny.removeClass(document.documentElement, 'no-js');

    // Expose event names
    for (var m in tiny) {
        if (/^on\w+/.test(m) && typeof tiny[m] === 'string') {
            ch[m] = tiny[m];
        }
    }

    // Iphone scale fix
    scaleFix();

    // Prevent zoom onfocus
    preventZoom();

    // Fix the broken iPad/iPhone form label click issue
    fixLabels();

    // Cancel pointers if the user scroll.
    cancelPointerOnScroll();

    var viewportmeta = document.querySelector('meta[name=viewport]');

    /**
     * Fixes the broken iPad/iPhone form label click issue.
     * @name fixLabels
     * @see Based on: &lt;a href="http://www.quirksmode.org/dom/getstyles.html" target="_blank">http://www.quirksmode.org/dom/getstyles.html&lt;/a>
     */
    function fixLabels() {
        var labels = document.getElementsByTagName('label'),
            el,
            i = 0;

        function labelTap() {
            el = document.getElementById(this.getAttribute('for'));
            if (['radio', 'checkbox'].indexOf(el.getAttribute('type')) !== -1) {
                el.setAttribute('selected', !el.getAttribute('selected'));
            } else {
                el.focus();
            }
        }

        for (; labels[i]; i += 1) {
            if (labels[i].getAttribute('for')) {
                tiny.on(labels[i], ch.onpointertap, labelTap);
            }
        }
    }

    /**
     * Cancel pointers if the user scroll.
     * @name cancelPointerOnScroll
     */
    function cancelPointerOnScroll() {

        function blockPointer() {
            ch.pointerCanceled = true;

            function unblockPointer() {
                ch.pointerCanceled = false;
            }

            tiny.once(document, 'touchend', unblockPointer);
        }

        tiny.on(document, 'touchmove', blockPointer);
    }

    function gestureStart() {
        viewportmeta.setAttribute('content', 'width=device-width, minimum-scale=0.25, maximum-scale=1.6');
    }

    // Fix for iPhone viewport scale bug
    // http://www.blog.highub.com/mobile-2/a-fix-for-iphone-viewport-scale-bug/
    // @see View on &lt;a href="https://github.com/h5bp/mobile-boilerplate" target="_blank">https://github.com/h5bp/mobile-boilerplate&lt;/a>
    function scaleFix() {
        var ua = navigator.userAgent;
        if (viewportmeta && /iPhone|iPad|iPod/.test(ua) && !/Opera Mini/.test(ua)) {
            viewportmeta.setAttribute('content', 'width=device-width, minimum-scale=1.0, maximum-scale=1.0');
            document.addEventListener('gesturestart', gestureStart, false);
        }
    }

    // Prevent iOS from zooming onfocus
    // https://github.com/h5bp/mobile-boilerplate/pull/108
    // @see View on &lt;a href="https://github.com/h5bp/mobile-boilerplate" target="_blank">https://github.com/h5bp/mobile-boilerplate&lt;/a>
    function preventZoom() {
        var formFields = document.querySelectorAll('input, select, textarea'),
            contentString = 'width=device-width,initial-scale=1,maximum-scale=',
            i = 0;

        if (!viewportmeta) {
            return;
        }

        for (; i &lt; formFields.length; i += 1) {
            formFields[i].onfocus = function() {
                viewportmeta.setAttribute('content', contentString + '1');
            };

            formFields[i].onblur = function () {
                viewportmeta.setAttribute('content', contentString + '10');
            };
        }
    }
</code></pre>
        </article>
    </section>




            </div>
            <nav class="mesh-col-12 mesh-col-m-3 chico-nav">
                <h2>Classes</h2><ul><li><a href="../ch.autocomplete/">Autocomplete</a></li><li><a href="../ch.bubble/">Bubble</a></li><li><a href="../ch.calendar/">Calendar</a></li><li><a href="../ch.carousel/">Carousel</a></li><li><a href="../ch.component/">Component</a></li><li><a href="../ch.condition/">Condition</a></li><li><a href="../ch.countdown/">Countdown</a></li><li><a href="../ch.dropdown/">Dropdown</a></li><li><a href="../ch.expandable/">Expandable</a></li><li><a href="../ch.form/">Form</a></li><li><a href="../ch.layer/">Layer</a></li><li><a href="../ch.menu/">Menu</a></li><li><a href="../ch.modal/">Modal</a></li><li><a href="../ch.popover/">Popover</a></li><li><a href="../ch.positioner/">Positioner</a></li><li><a href="../ch.tooltip/">Tooltip</a></li><li><a href="../ch.transition/">Transition</a></li><li><a href="../ch.validation/">Validation</a></li><li><a href="../ch.viewport/">Viewport</a></li></ul><h2>Namespaces</h2><ul><li><a href="../ch/">ch</a></li></ul><h2>Mixins</h2><ul><li><a href="../ch.collapsible/">Collapsible</a></li><li><a href="../ch.content/">Content</a></li></ul><h3>Global</h3><ul><li><a href="../global/#cancelpointeronscroll">cancelPointerOnScroll</a></li><li><a href="../global/#fixlabels">fixLabels</a></li></ul>
            </nav>
        </div>
    </section>
</main>
